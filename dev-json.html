<link rel="import" href="../polymer/polymer.html">

<dom-module is="dev-json">
  <style>
    :host {
      display: block;
    }
    pre {
      font-family: Menlo,Monaco,Consolas,"Courier New",monospace;
      display: block;
      padding: 9.5px;
      margin: 0 0 10px;
      font-size: 13px;
      line-height: 1.42857143;
      color: #333;
      word-break: break-all;
      word-wrap: break-word;
      background-color: #f5f5f5;
      border: 1px solid #ccc;
      border-radius: 4px;
      color: rgb(51, 51, 51);
    }
  </style>
  <template>
    <pre>{{stringified}}</pre>
  </template>
</dom-module>

<script>
  (function() {
    'use strict';
    Polymer({
      is: 'dev-json',
      properties: {
        title: {
          type: String,
          notify: true,
          value: null
        },
        json: {
          type: String,
          notify: true,
          value: null,
          observer: '_jsonChanged'
        },
        log: {
          type: Boolean,
          value: true
        },
        stringified:{
          type: String,
          computed:'_stringify(title, json)'
        }
      },

      _stringify: function(title, obj) {
        return JSON.stringify(obj, null, 2);
      },

      _jsonChanged: function() {
        if(this.log){
          console.log('[CHANGE]', this.title, this.json);
        }
      }
  });
  }());
</script>
